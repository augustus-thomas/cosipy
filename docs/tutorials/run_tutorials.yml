# Local paths are relative to where this file lives
# Wasabi paths are relative to the wasabi bucket
# The notebook can be either a specific path, or a list. The latter will
# run all in the list in series.
# Each tutorial entry is run independently from each other.
# The notebook and the ancillary files are copied to the output directory
# The notebook, by default, should use paths relative to the notebook

tutorials:
  globals:
    output_dir: # Will append tutorial name to each tutorial. Not optional, it needs to be provided either here or on the command line
    wasabi_bucket: cosi-pipeline-public
    wasabi_mirror:  # Optional. Mirror of bucket above
    kernel: python3 # Optional but recommended
    timeout:  # in seconds, per cell. Optional
  tutorials:
    # Tutorial names are arbitrary, but can be used to specify
    # a specific tutorial in run_tutorial.py

    test:
      notebook:
        - test/test.ipynb
        - test/test_2.ipynb
      ancillary_files:
        - test/ancillary_test_file.txt
      wasabi_files:
        - test_file.txt
      wasabi_files_unzip:
        test_file.txt.gz:
          #unzip_output: # Optional, if the unzipped file name is different from just removing the .zip or .gz
          checksum: c29015230d84e5e44e773c51c99b5911 # MD5 sum

    dataIO:
      notebook: DataIO/DataIO_example.ipynb
      ancillary_files:
        - DataIO/inputs.yaml
        - DataIO/inputs_half_time.yaml
      wasabi_files:
        - ComptonSphere/mini-DC2/GalacticScan.inc1.id1.crab2hr.extracted.tra.gz

    spacecraft_file:
      notebook: response/SpacecraftFile.ipynb
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    response:
      notebook: response/DetectorResponse.ipynb
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    ts_map:
      notebook: ts_map/Parallel_TS_map_computation.ipynb
      wasabi_files:
        - COSI-SMEX/cosipy_tutorials/grb_spectral_fit_local_frame/grb_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/ts_maps/bkg_binned_data_local.hdf5
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
        - COSI-SMEX/DC2/Data/Sources/Crab_DC2_3months_unbinned_data.fits.gz
        - COSI-SMEX/DC2/Data/Backgrounds/albedo_photons_3months_unbinned_data.fits.gz
        - COSI-SMEX/cosipy_tutorials/ts_maps/Crab_galactic_CDS_binned.hdf5
        - COSI-SMEX/cosipy_tutorials/ts_maps/Albedo_galactic_CDS_binned.hdf5
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda
        COSI-SMEX/DC2/Responses/PointSourceReponse/psr_gal_continuum_DC2.h5.zip:
          unzip_output: psr_gal_DC2.h5
          checksum: e817e1d4b5d1add566a56338cba38410

    spectral_fit_grb:
      notebook: spectral_fits/continuum_fit/grb/SpectralFit_GRB.ipynb
      ancillary_files:
        - spectral_fits/continuum_fit/grb/background.yaml
        - spectral_fits/continuum_fit/grb/grb.yaml
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
        - COSI-SMEX/cosipy_tutorials/grb_spectral_fit_local_frame/grb_bkg_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/grb_spectral_fit_local_frame/grb_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/grb_spectral_fit_local_frame/bkg_binned_data_1s_local.hdf5
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    spectral_fit_crab:
      notebook: spectral_fits/continuum_fit/crab/SpectralFit_Crab.ipynb
      ancillary_files:
        - spectral_fits/continuum_fit/crab/background.yaml
        - spectral_fits/continuum_fit/crab/crab.yaml
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
        - COSI-SMEX/cosipy_tutorials/crab_spectral_fit_galactic_frame/crab_bkg_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/crab_spectral_fit_galactic_frame/crab_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/crab_spectral_fit_galactic_frame/bkg_binned_data.hdf5
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    extended_source:
      notebook: spectral_fits/extended_source_fit/diffuse_511_spectral_fit.ipynb
      ancillary_files:
        - spectral_fits/extended_source_fit/Gal_511.yaml
        - spectral_fits/extended_source_fit/OPsSpectrum.dat
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
        - COSI-SMEX/DC2/Data/Backgrounds/cosmic_photons_3months_unbinned_data.fits.gz
        - COSI-SMEX/DC2/Data/Sources/511_Testing_3months_unbinned_data.fits.gz
        - COSI-SMEX/DC2/Responses/SMEXv12.511keV.HEALPixO4.binnedimaging.imagingresponse.nonsparse_nside16.area.h5
        - COSI-SMEX/cosipy_tutorials/extended_source_spectral_fit_galactic_frame/cosmic_photons_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/extended_source_spectral_fit_galactic_frame/gal_511_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/extended_source_spectral_fit_galactic_frame/combined_binned_data.hdf5
        - COSI-SMEX/cosipy_tutorials/extended_source_spectral_fit_galactic_frame/combined_binned_data_thin_disk.hdf5
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/PointSourceReponse/psr_gal_511_DC2.h5.gz:
          checksum: daaace1b814728b8410aee0367e449a3

    imaging_511_scatt:
      notebook:
        - image_deconvolution/511keV/ScAttBinning/511keV-ScAtt-DataReduction.ipynb
        - image_deconvolution/511keV/ScAttBinning/511keV-ScAtt-ImageDeconvolution.ipynb
      ancillary_files:
        - image_deconvolution/511keV/ScAttBinning/imagedeconvolution_parfile_scatt_511keV.yml
        - image_deconvolution/511keV/ScAttBinning/inputs_511keV.yaml
      wasabi_files:
        - COSI-SMEX/DC2/Responses/SMEXv12.511keV.HEALPixO4.binnedimaging.imagingresponse.nonsparse_nside16.area.h5
        - COSI-SMEX/DC2/Data/Sources/511_thin_disk_3months_unbinned_data.fits.gz
        - COSI-SMEX/DC2/Data/Backgrounds/albedo_photons_3months_unbinned_data.fits.gz
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori

    source_injector:
      notebook: source_injector/Point_source_injector.ipynb
      ancillary_files:
        - source_injector/OPsSpectrum.dat
        - source_injector/crab_spec.dat
        - source_injector/model_injected.h5
      wasabi_files:
        - COSI-SMEX/DC2/Data/Orientation/20280301_3_month_with_orbital_info.ori
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    background_continuum:
      notebook: background_estimation/continuum_estimation/BG_estimation_example.ipynb
      wasabi_files:
        - COSI-SMEX/DC3/Data/Orientation/DC3_final_530km_3_month_with_slew_15sbins_GalacticEarth_SAA.ori
        - COSI-SMEX/cosipy_tutorials/background_estimation/crab_bkg_binned_data_galactic.hdf5
        - COSI-SMEX/cosipy_tutorials/background_estimation/inputs_crab.yaml
      wasabi_files_unzip:
        COSI-SMEX/DC2/Responses/SMEXv12.Continuum.HEALPixO3_10bins_log_flat.binnedimaging.imagingresponse.nonsparse_nside8.area.good_chunks_unzip.h5.zip:
          checksum: e8ff763c5d9e63d3797567a4a51d9eda

    background_line:
      notebook: background_estimation/line_background/line_background_estimation_example_notebook.ipynb
      ancillary_files:
        - background_estimation/line_background/inputs_bkg_estimation.yaml
        - background_estimation/line_background/inputs_check_results.yaml
      wasabi_files:
        - COSI-SMEX/DC3/Data/Sources/26Al_NE2001_3months_unbinned_data_filtered_with_SAAcut.fits.gz
        - COSI-SMEX/DC3/Data/Backgrounds/Ge/AlbedoPhotons_3months_unbinned_data_filtered_with_SAAcut.fits.gz

    polarization_asad:
      notebook: polarization/ASAD_method.ipynb
      ancillary_files:
        - polarization/background_after.yaml
        - polarization/background_before.yaml
        - polarization/grb.yaml
      wasabi_files:
        - COSI-SMEX/cosipy_tutorials/polarization_fit/grb_background.fits.gz
        - COSI-SMEX/DC3/Data/Orientation/DC3_final_530km_3_month_with_slew_1sbins_GalacticEarth_SAA.ori
      wasabi_files_unzip:
        COSI-SMEX/DC3/Data/Responses/ResponseContinuum.o3.pol.e200_10000.b4.p12.s10396905069491.m441.filtered.nonsparse.binnedpolarization.11D_nside8.area.h5.gz:
          checksum: 5c307495846af981490f6e420c6f9c17

